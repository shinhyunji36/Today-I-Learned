> **일시**: 2023년 01월 11일 화 `18:00` ~ `19:55`

## [책] 클린코드 이제는 파이썬이다
### 03장. 코딩 스타일 정립과 코드 포매팅 자동화
- 코드 포매팅 도구인 블랙(Black)
- 스타일 가이드와 PEP8

### 가로 간격
#### 들여쓰기를 위한 공백 문자 사용
- 탭보다 공백을 사용하는 방식이 모범사례
- why?
  - 스페이스바로 만들어진 공백 문자는 항상 ' '와 같이 하나의 공백으로 구성된 문자열 값
  - 그러나 탭이 나타내는 공백 폭은 가변적
- python3에서는 들여쓰기시에 탭과 공백을 섞어서 사용하면 바로 TabError라는 에러 메세지 발생

#### 코드 행 내의 공백 활용
- 연산자와 식별자 사이에 공백 한 칸
  `blanks = blanks[:i] + secretWord[i] + blanks[i + i :]`
- 구분자는 앞쪽이 아니라 뒤쪽에 공백 한 칸
  ```python
  def spam(eggs, bacon, ham):
      weights = [42, 3, 2]
  ```
- 코드행 끝의 주석 앞에는 공백 2칸!
  `print('Hello, Word!'). # 인사말 출력`
  
### 세로 간격
- **함수나 클래스는 두 줄의 빈행을 넣기!!**
- **클래스 내 메소드는 빈 행 한 줄!!**
- 함수나 메소드 또는 전역 범위 내에서 빈 행이 어디 들어가야할지를 블랙이 결정하진 못한다.
  - 프로그래머의 주관적 결정에 따라 어떤 코드 행들을 하나의 그룹으로 묶을지 결정.
  - e.g. 동일한 작업을 하고 있다 판단되는 코드들은 다른 코드들과 세로 간격을 통해 분리시켜 그룹화 시키기
- PEP 8에서는 import 문을 다음과 같이 세 그룹으로 묶어 번호 순서대로 배치할 것을 권장함.
  - 1. math, os, sys 등 파이썬 표준 라이브러리
  - 2. 셀레니움, 리퀘스트, 장고 등 서드파티 모듈
  - 3. 현재 작성중인 프로그램의 일부인 로컬 모듈

### 엄격한 코드 포매터, 블랙
#### 블랙 설치 방법
` python -m pip install --user black`
- `-m`: 파이썬에게 pip 모듈을 애플리케이션으로 실행하라고 지시
- `python -m black`: black 설치에 성공했는지 실행해보기
  - 이 때, 설치가 잘 되었다면 `No paths given. Nothing to do (지정된 경로 없음, 수행할 작업 없음)` 이라는 메세지가 표시되어야 한다.

#### 명령행에서 블랙 실행하는 방법
- yourScript.py라는 파일을 자동으로 포매팅 하고 싶은 경우, 
  `python -m black yourScript.py`
  
- 폴더의 모든 .py 파일에 대해 블랙을 실행하려면 개별 파일 대신 폴더를 지정해야한다.
  `python -m black C:\yourPythonFiles`

- 블랙의 행 길이 설정 조정
  - 블랙에서는 한 행당 88자를 기본으로 사용 (저자는 120자를 선호한다고 한다.)
  - 행 길이 제한을 120자로 바꾸기 위해서는 `python -m black -l 120 yourScript.py`를 실행하면 된다.

- 블랙의 문자열 큰따옴표 설정 비활성화
  - 문자열에 큰 따옴표 문자가 포함되지 않은 경우, 블랙은 문자열 리터럴에서 작은 따옴표를 큰 따옴표로 자동으로 변경한다. 
  - 큰 따옴표를 선호하는 블랙의 설정.
  - 이 때, 문자열 리터럴을 작성한 대로 놔두고, 따옴표의 종료를 블랙이 변경하지 않게 하고 싶다면, 
    - `python -m black -S yourScript.py` 를 실행
    - 주의할 점은 대문자 S 라는 점. 
  - 행 길이 제한과 함께 따옴표의 종류를 블랙이 변경하지 않게 하고 싶다면 `python -m black -l 120 -S yourScript.py` 를 실행하면 된다.

- 블랙이 변경할 내용 미리 보기
  - 작성자가 만든 원래의 포맷을 고수하려면, 소스 코드에 버전 관리를 활용하거나 따로 백업을 유지하면 된다.
  - 혹은 `--diff`명령행 옵션으로 블랙을 실행해서 실제로 파일을 변경하지 않고도 블랙이 변경할 내용을 미리 확인할 수 있다.
    - `python -m black --diff yourScript.py`
    ![image](https://user-images.githubusercontent.com/74661937/212038392-822cda31-b796-4619-9f61-c07e9ab01a96.png)
    - 빼기 부호(-)는 블랙이 행 `weight=[42.0,3.1415,2.718]`을 삭제하고,
    - 더하기 부호(+)가 붙은 행으로 대체함을 나타낸다.
  - 주의할 점: 블랙을 실행해서 소스 코드 파일을 변경한 후에는 이 작업을 되돌릴 수 없다!!!
    - 따라서 블랙 실행 전에, 소스코드 백업 사본을 만들거나 깃 등의 버전 관리 소프트웨어를 사용해야한다.

#### 코드 특정 부분에 대한 블랙 비활성화
- 코드의 특정 부분은 포매팅하고 싶지 않은 경우, 
  `# fmt: off`와 `# fmt: on`주석을 추가해 블랙에게 지시를 내려서 해당 행들에 대한 코드 포매팅을 해제한 다음, 나중에 다시 시작하게 할 수 있다.
  - e.g. 블랙은 기본적으로 `=` 할당 연산자 앞에 붙은 불필요한 공백을 제거한다. 이를 방지하는 코드
  
    ```python
    # 다양한 시간 단위에 관련된 상수 설정
    # fmt: off
    SECONDS_PER_MINUTE = 60
    SECONDS_PER_HOUR   = 60 * SECONDS_PER_MINUTE
    SECONDS_PER_DAY    = 24 * SECONDS_PER_HOUR
    #fmt: on
    ```
### 추가
- 블랙같은 자동화 도구는 코드를 얼마나 띄어쓸지와 같은 구문론적인 결정을 내릴 수 있다
- 그러나 좋은 변수 이름이 무엇인지와 같은 의미론적 결정은 결코 내릴 수 없다. 이는 사용자의 몫! (다음장에 이어서...)

  
  
